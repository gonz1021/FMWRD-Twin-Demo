<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fox Metro — Digital Twin</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #0f172a;
      color: white;
      text-align: center;
    }

    header {
      padding: 10px;
    }

    #controls {
      margin: 10px 0;
    }

    #map-container {
      position: relative;
      margin: 0 auto;
      width: 90%;
      max-width: 800px;
      height: 600px;
      border: 2px solid #334155;
      background: url('IMG_8532.jpeg') no-repeat center center;
      background-size: contain;
      overflow: hidden;
    }

    .station {
      position: absolute;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #22c55e;
      color: black;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      cursor: grab;
      border: 2px solid #1e293b;
      user-select: none;
    }

    .station.dragging {
      opacity: 0.7;
    }

    #charts {
      margin: 20px auto;
      width: 90%;
      max-width: 800px;
      border: 2px solid #334155;
      padding: 10px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Fox Metro — Digital Twin</h1>
    <div id="controls">
      <button onclick="startSim()">▶ Start</button>
      <button onclick="pauseSim()">⏸ Pause</button>
      <button onclick="resetSim()">↺ Reset</button>
      <label>Speed:
        <select id="speed">
          <option>1x</option>
          <option>2x</option>
          <option>4x</option>
        </select>
      </label>
    </div>
  </header>

  <section id="map-container">
    <!-- Example stations (you can add/remove as needed) -->
    <div class="station" style="top: 50px; left: 100px;">1</div>
    <div class="station" style="top: 200px; left: 300px;">2</div>
    <div class="station" style="top: 400px; left: 200px;">3</div>
    <div class="station" style="top: 350px; left: 500px;">4</div>
  </section>

  <section id="charts">
    <h2>Telemetry & Charts</h2>
    <p>[Future data and charts will appear here]</p>
  </section>

  <script>
    // Dragging logic
    const stations = document.querySelectorAll('.station');
    stations.forEach(station => {
      station.addEventListener('mousedown', dragStart);
      station.addEventListener('touchstart', dragStart);
    });

    let current = null, offsetX = 0, offsetY = 0;

    function dragStart(e) {
      e.preventDefault();
      current = e.target;
      current.classList.add('dragging');
      const rect = current.getBoundingClientRect();
      if (e.type === 'mousedown') {
        offsetX = e.clientX - rect.left;
        offsetY = e.clientY - rect.top;
        document.addEventListener('mousemove', dragging);
        document.addEventListener('mouseup', dragEnd);
      } else {
        offsetX = e.touches[0].clientX - rect.left;
        offsetY = e.touches[0].clientY - rect.top;
        document.addEventListener('touchmove', dragging);
        document.addEventListener('touchend', dragEnd);
      }
    }

    function dragging(e) {
      if (!current) return;
      const container = document.getElementById('map-container');
      const rect = container.getBoundingClientRect();
      let x, y;
      if (e.type === 'mousemove') {
        x = e.clientX - rect.left - offsetX;
        y = e.clientY - rect.top - offsetY;
      } else {
        x = e.touches[0].clientX - rect.left - offsetX;
        y = e.touches[0].clientY - rect.top - offsetY;
      }
      // Keep within container
      x = Math.max(0, Math.min(x, rect.width - current.offsetWidth));
      y = Math.max(0, Math.min(y, rect.height - current.offsetHeight));
      current.style.left = x + 'px';
      current.style.top = y + 'px';
    }

    function dragEnd() {
      if (!current) return;
      current.classList.remove('dragging');
      document.removeEventListener('mousemove', dragging);
      document.removeEventListener('mouseup', dragEnd);
      document.removeEventListener('touchmove', dragging);
      document.removeEventListener('touchend', dragEnd);
      current = null;
    }

    // Dummy simulation controls
    function startSim() { alert("Simulation started"); }
    function pauseSim() { alert("Simulation paused"); }
    function resetSim() { alert("Simulation reset"); }
  </script>
</body>
</html>
